FROM tobix/pywine:py3.7

RUN wine pip install \
  colorama \
  flake8 \
  flake8-isort \
  google \
  google-api-python-client \
  ipython \
  isort \
  jsonpatch \
  pyinstaller \
  pytest \
  pytest-cov \
  pyyaml==4.2b4 \
  requests \
  requests-mock

# Create dedicated project folder.
ARG HOME=/home/square
RUN mkdir $HOME
ADD . $HOME

# Build the Windows binary.
RUN cd $HOME && wine pyinstaller --onefile --noupx square.py
